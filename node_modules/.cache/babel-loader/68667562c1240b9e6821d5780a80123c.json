{"ast":null,"code":"import _asyncToGenerator from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{useState,useContext}from'react';import{useParams}from'react-router-dom';import{AuthContext}from'../context/authContext';import{ModalWindow}from'../component/modal';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditPage=function EditPage(){var _useParams=useParams(),id=_useParams.id;var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),check=_useState2[0],setChecked=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState('Задача успешно отредактирована'),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var pressHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append(\"token\",auth.token);if(text){if(check){formData.append(\"status\",11);formData.append(\"text\",text);}else{formData.append(\"status\",1);formData.append(\"text\",text);}}else{if(check){formData.append(\"status\",10);}else formData.append(\"status\",0);}_context.next=5;return axios({url:\"https://uxcandy.com/~shapoval/test-task-backend/v2/edit/\".concat(id,\"?developer=ilia\"),crossDomain:true,method:'POST',mimeType:\"multipart/form-data\",contentType:false,processData:false,data:formData,dataType:\"json\"}).then(function(){setShow(true);if(!localStorage.getItem('userData')){setMessage('Задача не сохранена, войдите на сайт еще раз.');}});case 5:case\"end\":return _context.stop();}}},_callee);}));return function pressHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{style:{paddingTop:100,maxWidth:500,margin:'auto'},children:[/*#__PURE__*/_jsx(ModalWindow,{show:show,message:message,handleClose:function handleClose(){return setShow(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Example textarea\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",name:\"text\",id:\"email\",rows:\"3\",onChange:function onChange(e){return setText(e.target.value);}})]}),/*#__PURE__*/_jsx(\"input\",{checked:check,type:\"checkbox\",onChange:function onChange(){return setChecked(!check);}}),\" \\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0430?\",/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",onClick:pressHandler,type:\"button\",children:\"Sign in\"})]});};","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/client/src/pages/editPage.js"],"names":["axios","useState","useContext","useParams","AuthContext","ModalWindow","EditPage","id","auth","check","setChecked","text","setText","show","setShow","message","setMessage","pressHandler","formData","FormData","append","token","url","crossDomain","method","mimeType","contentType","processData","data","dataType","then","localStorage","getItem","paddingTop","maxWidth","margin","e","target","value"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { useState, useContext } from 'react'\nimport { useParams } from 'react-router-dom';\nimport {AuthContext} from '../context/authContext'\nimport {ModalWindow} from '../component/modal'\n\nexport const EditPage = () => {\n\n    const {id} = useParams()\n    const auth = useContext(AuthContext)\n    const [check, setChecked] = useState(false)\n    const [text, setText] = useState(null)\n    const [show, setShow] = useState(false)\n    const [message, setMessage] = useState('Задача успешно отредактирована')\n\n    const pressHandler = async () => {\n        const formData = new FormData()\n\n        formData.append(\"token\", auth.token)\n\n        if(text){\n            if(check){\n                formData.append(\"status\", 11)\n                formData.append(\"text\", text)\n            }else{\n                formData.append(\"status\", 1)\n                formData.append(\"text\", text)\n            }\n            \n        }else{\n            if(check){\n                formData.append(\"status\", 10)\n            }else formData.append(\"status\", 0)\n            \n        }\n        \n\n        await axios({\n            url: `https://uxcandy.com/~shapoval/test-task-backend/v2/edit/${id}?developer=ilia`,\n            crossDomain: true,\n                method: 'POST',\n                mimeType: \"multipart/form-data\",\n                contentType: false,\n                processData: false,\n                data: formData,\n                dataType: \"json\",\n        })\n        .then(() => {\n            setShow(true)\n            if(!localStorage.getItem('userData')){\n                setMessage('Задача не сохранена, войдите на сайт еще раз.')\n            }\n        })\n    }\n\n    return (\n\n        <form style={{paddingTop: 100, maxWidth: 500, margin: 'auto'}} >\n            <ModalWindow \n            show={show}\n            message={message}\n            handleClose={() => setShow(false)}\n            />\n            <div className=\"mb-3\">\n                <label htmlFor=\"email\" className=\"form-label\">Example textarea</label>\n                <textarea className=\"form-control\" name='text' id=\"email\" rows=\"3\" onChange={(e) => setText(e.target.value)}/>\n            </div>\n            <input checked={check} type='checkbox' onChange={() => setChecked(!check)}/> Выполнена?\n            <button className=\"w-100 btn btn-lg btn-primary\" onClick={pressHandler} type='button'>Sign in</button>\n        </form>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}