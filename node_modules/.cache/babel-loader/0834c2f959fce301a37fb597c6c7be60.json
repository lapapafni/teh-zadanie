{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback, useEffect } from \"react\";\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [ready, setReady] = useState(false);\n  const login = useCallback(jwtToken => {\n    setToken(jwtToken);\n    localStorage.setItem('userData', JSON.stringify({\n      token: jwtToken\n    }));\n  }, []);\n  const logout = useCallback(() => {\n    setToken(null);\n    localStorage.removeItem('userData');\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem('userData'));\n\n    if (data && data.token) {\n      login(data.token, data.userId);\n    }\n\n    setReady(true);\n  }, [login]);\n  return {\n    logout,\n    login,\n    token,\n    ready\n  };\n};\n\n_s(useAuth, \"q8Z0nmWyJARhpg40hm/XaWjvB+o=\");","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/client/src/hooks/auth.hook.js"],"names":["useState","useCallback","useEffect","useAuth","token","setToken","ready","setReady","login","jwtToken","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem","userId"],"mappings":";;AAAA,SAAQA,QAAR,EAAkBC,WAAlB,EAA+BC,SAA/B,QAA+C,OAA/C;AAIA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAG5B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACM,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,KAAD,CAAlC;AAGA,QAAMQ,KAAK,GAAGP,WAAW,CAAEQ,QAAD,IAAc;AACvCJ,IAAAA,QAAQ,CAACI,QAAD,CAAR;AAEAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAe;AAC/CT,MAAAA,KAAK,EAAEK;AADwC,KAAf,CAAjC;AAMA,GATwB,EAStB,EATsB,CAAzB;AAYA,QAAMK,MAAM,GAAGb,WAAW,CAAC,MAAM;AAChCI,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAK,IAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AAGA,GALyB,EAKvB,EALuB,CAA1B;AAOAb,EAAAA,SAAS,CAAC,MAAM;AAEf,UAAMc,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAX,CAAb;;AAEA,QAAGF,IAAI,IAAIA,IAAI,CAACZ,KAAhB,EAAsB;AACrBI,MAAAA,KAAK,CAACQ,IAAI,CAACZ,KAAN,EAAaY,IAAI,CAACG,MAAlB,CAAL;AACA;;AACDZ,IAAAA,QAAQ,CAAC,IAAD,CAAR;AAEA,GATQ,EASN,CAACC,KAAD,CATM,CAAT;AAYA,SAAO;AAACM,IAAAA,MAAD;AAASN,IAAAA,KAAT;AAAgBJ,IAAAA,KAAhB;AAAuBE,IAAAA;AAAvB,GAAP;AACA,CAvCM;;GAAMH,O","sourcesContent":["import {useState, useCallback, useEffect} from \"react\"\n\n\n\nexport const useAuth = () => {\n\n\t\n\tconst [token, setToken] = useState(null)\n\tconst [ready, setReady] = useState(false)\n\n\n\tconst login = useCallback((jwtToken) => {\n\t\tsetToken(jwtToken)\n\t\t\n\t\tlocalStorage.setItem('userData', JSON.stringify({\n\t\t\ttoken: jwtToken\n\t\t}))\n\n\t\t\n\n\t}, [])\n\n\n\tconst logout = useCallback(() => {\n\t\tsetToken(null)\n\t\tlocalStorage.removeItem('userData')\n\t\t\n\n\t}, [])\n\n\tuseEffect(() => {\n\n\t\tconst data = JSON.parse(localStorage.getItem('userData'))\n\n\t\tif(data && data.token){\n\t\t\tlogin(data.token, data.userId)\n\t\t}\n\t\tsetReady(true)\n\n\t}, [login])\n\n\n\treturn {logout, login, token, ready}\n}"]},"metadata":{},"sourceType":"module"}