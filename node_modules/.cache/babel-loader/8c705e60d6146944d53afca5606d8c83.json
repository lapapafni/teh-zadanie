{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useCallback, useEffect } from \"react\";\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [ready, setReady] = useState(false);\n  const login = useCallback((jwtToken, id) => {\n    setToken(jwtToken);\n    setUserId(id);\n    localStorage.setItem('userData', JSON.stringify({\n      userId: id,\n      token: jwtToken\n    }));\n  }, []);\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n    localStorage.removeItem('userData');\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem('userData'));\n\n    if (data && data.token) {\n      login(data.token, data.userId);\n    }\n\n    setReady(true);\n  }, [login]);\n  return {\n    logout,\n    login,\n    token,\n    userId,\n    ready\n  };\n};\n\n_s(useAuth, \"nXr0LXjfRF2enXJ8EmUX5DYZyls=\");","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/тех-задание/client/src/hooks/auth.hook.js"],"names":["useState","useCallback","useEffect","useAuth","token","setToken","userId","setUserId","ready","setReady","login","jwtToken","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":";;AAAA,SAAQA,QAAR,EAAkBC,WAAlB,EAA+BC,SAA/B,QAA+C,OAA/C;AAIA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAG5B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACM,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACQ,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,KAAD,CAAlC;AAGA,QAAMU,KAAK,GAAGT,WAAW,CAAC,CAACU,QAAD,EAAWC,EAAX,KAAkB;AAC3CP,IAAAA,QAAQ,CAACM,QAAD,CAAR;AACAJ,IAAAA,SAAS,CAACK,EAAD,CAAT;AAEAC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCC,IAAI,CAACC,SAAL,CAAe;AAC/CV,MAAAA,MAAM,EAAEM,EADuC;AACnCR,MAAAA,KAAK,EAAEO;AAD4B,KAAf,CAAjC;AAIA,GARwB,EAQtB,EARsB,CAAzB;AAWA,QAAMM,MAAM,GAAGhB,WAAW,CAAC,MAAM;AAChCI,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAM,IAAAA,YAAY,CAACK,UAAb,CAAwB,UAAxB;AAEA,GALyB,EAKvB,EALuB,CAA1B;AAOAhB,EAAAA,SAAS,CAAC,MAAM;AAEf,UAAMiB,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAX,CAAb;;AAEA,QAAGF,IAAI,IAAIA,IAAI,CAACf,KAAhB,EAAsB;AACrBM,MAAAA,KAAK,CAACS,IAAI,CAACf,KAAN,EAAae,IAAI,CAACb,MAAlB,CAAL;AACA;;AACDG,IAAAA,QAAQ,CAAC,IAAD,CAAR;AAEA,GATQ,EASN,CAACC,KAAD,CATM,CAAT;AAYA,SAAO;AAACO,IAAAA,MAAD;AAASP,IAAAA,KAAT;AAAgBN,IAAAA,KAAhB;AAAuBE,IAAAA,MAAvB;AAA+BE,IAAAA;AAA/B,GAAP;AACA,CAvCM;;GAAML,O","sourcesContent":["import {useState, useCallback, useEffect} from \"react\"\n\n\n\nexport const useAuth = () => {\n\n\t\n\tconst [token, setToken] = useState(null)\n\tconst [userId, setUserId] = useState(null)\n\tconst [ready, setReady] = useState(false)\n\n\n\tconst login = useCallback((jwtToken, id) => {\n\t\tsetToken(jwtToken)\n\t\tsetUserId(id)\n\n\t\tlocalStorage.setItem('userData', JSON.stringify({\n\t\t\tuserId: id, token: jwtToken\n\t\t}))\n\n\t}, [])\n\n\n\tconst logout = useCallback(() => {\n\t\tsetToken(null)\n\t\tsetUserId(null)\n\t\tlocalStorage.removeItem('userData')\n\n\t}, [])\n\n\tuseEffect(() => {\n\n\t\tconst data = JSON.parse(localStorage.getItem('userData'))\n\n\t\tif(data && data.token){\n\t\t\tlogin(data.token, data.userId)\n\t\t}\n\t\tsetReady(true)\n\n\t}, [login])\n\n\n\treturn {logout, login, token, userId, ready}\n}"]},"metadata":{},"sourceType":"module"}