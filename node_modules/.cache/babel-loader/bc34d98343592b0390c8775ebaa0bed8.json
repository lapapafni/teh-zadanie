{"ast":null,"code":"import _asyncToGenerator from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useContext}from'react';import{AuthContext}from\"../context/authContext\";import{ModalWindow}from\"../component/modal\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginPage=function LoginPage(){var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),errorPassword=_useState2[0],setErrorPassword=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),errorUsername=_useState4[0],setErrorUsername=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState({username:'',password:''}),_useState8=_slicedToArray(_useState7,2),form=_useState8[0],setForm=_useState8[1];var changeHandler=function changeHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var blurHadler=function blurHadler(event){switch(event.target.name){case'username':if(!form.username){setErrorUsername(true);}break;case'password':if(!form.password){setErrorPassword(true);}break;default:setErrorPassword(false);setErrorUsername(false);break;}};var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var formData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;formData=new FormData();formData.append(\"username\",form.username);formData.append(\"password\",form.password);_context.next=6;return axios({url:'https://uxcandy.com/~shapoval/test-task-backend/v2/login?developer=ilia',crossDomain:true,method:'POST',mimeType:\"multipart/form-data\",contentType:false,processData:false,data:formData,dataType:\"json\"}).then(function(response){if(!response.data.message.token){setShow(true);}auth.login(response.data.message.token);});case 6:_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function loginHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:170},children:[/*#__PURE__*/_jsx(ModalWindow,{show:show,message:'Неправильные данные',handleClose:function handleClose(){return setShow(false);}}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",\"cz-shortcut-listen\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-signin\",style:{maxWidth:350,margin:'auto'},children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 fw-normal\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{onBlur:blurHadler,type:\"text\",className:\"form-control\",id:\"floatingInput\",placeholder:\"Username\",name:\"username\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Username\"}),errorUsername&&/*#__PURE__*/_jsx(\"div\",{id:\"usernameHelp\",className:\"form-text red\",children:\"\\u041F\\u043E\\u043B\\u0435 \\u0441 \\u0438\\u043C\\u0435\\u043D\\u0435\\u043C \\u0434\\u043E\\u043B\\u0436\\u043D\\u043E \\u0431\\u044B\\u0442\\u044C \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",{onBlur:blurHadler,type:\"password\",className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",name:\"password\",onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingPassword\",children:\"Password\"}),errorPassword&&/*#__PURE__*/_jsx(\"div\",{id:\"passwordHelp\",className:\"form-text\",children:\"\\u041F\\u043E\\u043B\\u0435 \\u0441 \\u043F\\u0430\\u0440\\u043E\\u043B\\u0435\\u043C \\u0434\\u043E\\u043B\\u0436\\u043D\\u043E \\u0431\\u044B\\u0442\\u044C \\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043E\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",disabled:!form.username||!form.password,type:\"button\",onClick:loginHandler,children:\"Sign in\"})]})})})]});};","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/client/src/pages/loginPage.js"],"names":["useState","useContext","AuthContext","ModalWindow","axios","LoginPage","auth","errorPassword","setErrorPassword","errorUsername","setErrorUsername","show","setShow","username","password","form","setForm","changeHandler","event","target","name","value","blurHadler","loginHandler","formData","FormData","append","url","crossDomain","method","mimeType","contentType","processData","data","dataType","then","response","message","token","login","paddingTop","maxWidth","margin"],"mappings":"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","sourcesContent":["import {useState, useContext} from 'react'\nimport {AuthContext} from \"../context/authContext\"\nimport {ModalWindow} from \"../component/modal\"\nimport axios from \"axios\"\n\n\nexport const LoginPage = () => {\n\n    const auth = useContext(AuthContext)\n\n    \n    const [errorPassword, setErrorPassword] = useState(false)\n    const [errorUsername, setErrorUsername] = useState(false) \n    const [show, setShow] = useState(false)\n    const [form, setForm] = useState({\n        username: '', password: ''\n    })\n\n    \n\n    const changeHandler = event => {\n        setForm(\n        {...form, [event.target.name]: event.target.value})\n    }\n\n    const blurHadler = (event) => {\n        switch(event.target.name){\n            case 'username':\n                if(!form.username){\n                    setErrorUsername(true)\n                }\n                \n                break\n            case 'password':\n                if(!form.password){\n                    setErrorPassword(true)\n                }\n                break\n            default:\n                setErrorPassword(false)\n                setErrorUsername(false)\n                break\n        }\n    }\n\n    const loginHandler = async () => {\n        try {\n            const formData = new FormData();\n            formData.append(\"username\", form.username);\n            formData.append(\"password\", form.password);\n        \n        await axios({\n            url: 'https://uxcandy.com/~shapoval/test-task-backend/v2/login?developer=ilia',\n            crossDomain: true,\n                method: 'POST',\n                mimeType: \"multipart/form-data\",\n                contentType: false,\n                processData: false,\n                data: formData,\n                dataType: \"json\",\n        })\n          .then((response) => {\n              if(!response.data.message.token){\n                  setShow(true)\n              }\n              auth.login(response.data.message.token)\n          })  \n            \n            \n        } catch (e) {}\n\n    }\n    return (\n        <div style={{paddingTop: 170}}>\n            <ModalWindow \n            show={show}\n            message={'Неправильные данные'}\n            handleClose={() => setShow(false)}\n            />\n            <div className=\"text-center\" cz-shortcut-listen=\"true\">\n                <div className=\"form-signin\" style={{maxWidth: 350, margin: 'auto'}}>\n                    <form>\n            \n                        <h1 className=\"h3 mb-3 fw-normal\">Вход</h1>\n        \n                        <div className=\"form-floating\">\n                            <input onBlur={blurHadler} type=\"text\" className=\"form-control\" id=\"floatingInput\" placeholder=\"Username\" name='username' onChange={changeHandler}/>\n                            <label htmlFor=\"floatingInput\">Username</label>\n                            {errorUsername && <div id=\"usernameHelp\" className=\"form-text red\">Поле с именем должно быть обязательно заполнено</div>}\n                        </div>\n                        <div className=\"form-floating\">\n                          <input onBlur={blurHadler} type=\"password\" className=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\" name='password' onChange={changeHandler}/>\n                          <label htmlFor=\"floatingPassword\">Password</label>\n                          {errorPassword && <div id=\"passwordHelp\" className=\"form-text\">Поле с паролем должно быть обязательно заполнено</div>}\n                        </div>\n        \n            \n                        <button className=\"w-100 btn btn-lg btn-primary\" disabled={!form.username || !form.password} type=\"button\" onClick={loginHandler}>Sign in</button>\n            \n                    </form>\n                </div>\n            </div>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}