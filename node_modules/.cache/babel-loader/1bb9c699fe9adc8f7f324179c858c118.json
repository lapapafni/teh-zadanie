{"ast":null,"code":"import _slicedToArray from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback,useEffect}from\"react\";export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var login=useCallback(function(jwtToken){setToken(jwtToken);localStorage.setItem('userData',JSON.stringify({token:jwtToken}));},[]);var logout=useCallback(function(){setToken(null);localStorage.removeItem('userData');},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem('userData'));if(data&&data.token){login(data.token,data.userId);}setReady(true);},[login]);return{logout:logout,login:login,token:token,ready:ready};};","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/client/src/hooks/auth.hook.js"],"names":["useState","useCallback","useEffect","useAuth","token","setToken","ready","setReady","login","jwtToken","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem","userId"],"mappings":"yOAAA,OAAQA,QAAR,CAAkBC,WAAlB,CAA+BC,SAA/B,KAA+C,OAA/C,CAIA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAG5B,cAA0BH,QAAQ,CAAC,IAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAA0BL,QAAQ,CAAC,KAAD,CAAlC,yCAAOM,KAAP,eAAcC,QAAd,eAGA,GAAMC,CAAAA,KAAK,CAAGP,WAAW,CAAC,SAACQ,QAAD,CAAc,CACvCJ,QAAQ,CAACI,QAAD,CAAR,CAEAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCC,IAAI,CAACC,SAAL,CAAe,CAC/CT,KAAK,CAAEK,QADwC,CAAf,CAAjC,EAMA,CATwB,CAStB,EATsB,CAAzB,CAYA,GAAMK,CAAAA,MAAM,CAAGb,WAAW,CAAC,UAAM,CAChCI,QAAQ,CAAC,IAAD,CAAR,CACAK,YAAY,CAACK,UAAb,CAAwB,UAAxB,EAGA,CALyB,CAKvB,EALuB,CAA1B,CAOAb,SAAS,CAAC,UAAM,CAEf,GAAMc,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB,UAArB,CAAX,CAAb,CAEA,GAAGF,IAAI,EAAIA,IAAI,CAACZ,KAAhB,CAAsB,CACrBI,KAAK,CAACQ,IAAI,CAACZ,KAAN,CAAaY,IAAI,CAACG,MAAlB,CAAL,CACA,CACDZ,QAAQ,CAAC,IAAD,CAAR,CAEA,CATQ,CASN,CAACC,KAAD,CATM,CAAT,CAYA,MAAO,CAACM,MAAM,CAANA,MAAD,CAASN,KAAK,CAALA,KAAT,CAAgBJ,KAAK,CAALA,KAAhB,CAAuBE,KAAK,CAALA,KAAvB,CAAP,CACA,CAvCM","sourcesContent":["import {useState, useCallback, useEffect} from \"react\"\n\n\n\nexport const useAuth = () => {\n\n\t\n\tconst [token, setToken] = useState(null)\n\tconst [ready, setReady] = useState(false)\n\n\n\tconst login = useCallback((jwtToken) => {\n\t\tsetToken(jwtToken)\n\t\t\n\t\tlocalStorage.setItem('userData', JSON.stringify({\n\t\t\ttoken: jwtToken\n\t\t}))\n\n\t\t\n\n\t}, [])\n\n\n\tconst logout = useCallback(() => {\n\t\tsetToken(null)\n\t\tlocalStorage.removeItem('userData')\n\t\t\n\n\t}, [])\n\n\tuseEffect(() => {\n\n\t\tconst data = JSON.parse(localStorage.getItem('userData'))\n\n\t\tif(data && data.token){\n\t\t\tlogin(data.token, data.userId)\n\t\t}\n\t\tsetReady(true)\n\n\t}, [login])\n\n\n\treturn {logout, login, token, ready}\n}"]},"metadata":{},"sourceType":"module"}