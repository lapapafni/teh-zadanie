{"ast":null,"code":"import _asyncToGenerator from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ilia/\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B-\\u043A\\u043E\\u0434\\u0434\\u0438\\u043D\\u0433/\\u0444\\u0430\\u0439\\u043B\\u044B \\u0436\\u0441/client/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import{useState,useCallback,useEffect}from\"react\";import{Link}from'react-router-dom';import{useContext}from'react';import{AuthContext}from\"../context/authContext\";import{Paginate}from\"../component/paginate\";import{Filter}from\"../component/filter\";import{Status}from'../component/status';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var TasksPage=function TasksPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasksData=_useState2[0],setTasksData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),numTasks=_useState6[0],setNumTasks=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState('asc'),_useState10=_slicedToArray(_useState9,2),sortDirection=_useState10[0],setSortDirection=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),sortField=_useState12[0],setSortField=_useState12[1];var _useContext=useContext(AuthContext),token=_useContext.token;var filterTasks=function filterTasks(event){switch(event.target.name){case'sortDirection':if(event.target.checked){localStorage.setItem(event.target.name,event.target.checked);setSortDirection('desc');}else{localStorage.removeItem(event.target.name);setSortDirection('asc');}break;case'sortFieldId':if(event.target.checked){localStorage.setItem(event.target.name,event.target.checked);setSortField('id');}else{localStorage.removeItem(event.target.name);setSortField('');}break;case'sortFieldUsername':if(event.target.checked){localStorage.setItem(event.target.name,event.target.checked);setSortField('username');}else{localStorage.removeItem(event.target.name);setSortField('');}break;case'sortFieldEmail':if(event.target.checked){localStorage.setItem(event.target.name,event.target.checked);setSortField('email');}else{localStorage.removeItem(event.target.name);setSortField('');}break;case'sortFieldStatus':if(event.target.checked){localStorage.setItem(event.target.name,event.target.checked);setSortField('status');}else{localStorage.removeItem(event.target.name);setSortField('');}break;default:}};var getTask=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setLoading(true);_context.next=4;return axios.get(\"https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=ilia&page=\".concat(page,\"&sort_direction=\").concat(sortDirection,\"&sort_field=\").concat(sortField)).then(function(response){setLoading(false);setTasksData(response.data.message.tasks);setNumTasks(response.data.message.total_task_count);},[page,sortDirection,sortField]);case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);})),[page,sortDirection,sortField]);var nextPage=function nextPage(){return setPage(function(prev){return prev+1;});};var previewPage=function previewPage(){return setPage(function(prev){return prev-1;});};useEffect(function(){getTask();},[getTask]);if(loading){return/*#__PURE__*/_jsx(\"progress\",{});}if(tasksData.length){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:10,width:700},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0417\\u0430\\u0434\\u0430\\u0447\\u0438\"}),tasksData.map(function(task){return/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{marginTop:10},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:task.username}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-subtitle mb-2 text-muted\",children:task.email}),/*#__PURE__*/_jsx(Status,{status:task.status}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:task.text}),!!token&&/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary\",to:\"/edit/\".concat(task.id),style:{position:'absolute',right:20,top:50},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})]})},task.id);}),/*#__PURE__*/_jsx(Paginate,{page:page,numTasks:numTasks,nextButton:nextPage,previewButton:previewPage})]}),/*#__PURE__*/_jsx(Filter,{filterTasks:filterTasks})]});}return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0434\\u0430\\u0447 \\u043D\\u0435\\u0442, \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u044F\\u0439\\u0442\\u0435\"});};","map":{"version":3,"sources":["/home/ilia/Проекты-коддинг/файлы жс/client/src/pages/tasksPage.js"],"names":["axios","useState","useCallback","useEffect","Link","useContext","AuthContext","Paginate","Filter","Status","TasksPage","tasksData","setTasksData","loading","setLoading","numTasks","setNumTasks","page","setPage","sortDirection","setSortDirection","sortField","setSortField","token","filterTasks","event","target","name","checked","localStorage","setItem","removeItem","getTask","get","then","response","data","message","tasks","total_task_count","console","log","nextPage","prev","previewPage","length","paddingTop","width","map","task","marginTop","username","email","status","text","id","position","right","top"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport {useState, useCallback, useEffect} from \"react\"\nimport {Link} from 'react-router-dom'\nimport {useContext} from 'react'\n\nimport {AuthContext} from \"../context/authContext\"\nimport {Paginate} from \"../component/paginate\"\nimport {Filter} from \"../component/filter\"\nimport {Status} from '../component/status'\n\nexport const TasksPage = () => {\n    const [tasksData, setTasksData] = useState([])\n    const [loading, setLoading] = useState(false)\n    const [numTasks, setNumTasks] = useState(0)\n    const [page, setPage] = useState(1) \n    const [sortDirection, setSortDirection] = useState('asc')\n    const [sortField, setSortField] = useState('')\n    \n\n    const {token} = useContext(AuthContext)\n    \n\n    const filterTasks = (event) => {\n\n        switch(event.target.name){\n            case 'sortDirection':\n                if(event.target.checked){\n                    localStorage.setItem(event.target.name, event.target.checked)\n                    setSortDirection('desc')\n                }else{\n                    localStorage.removeItem(event.target.name)\n                    setSortDirection('asc')\n                }\n                break\n\n            case 'sortFieldId':\n                if(event.target.checked){\n                    localStorage.setItem(event.target.name, event.target.checked)\n                    setSortField('id')\n                    \n                }else{\n                    localStorage.removeItem(event.target.name)\n                    setSortField('')\n                }\n                break\n                \n            case 'sortFieldUsername':\n                if(event.target.checked){\n                    localStorage.setItem(event.target.name, event.target.checked)\n                    setSortField('username')\n\n                }else{\n                    localStorage.removeItem(event.target.name)\n                    setSortField('')\n\n                }\n                break\n            case 'sortFieldEmail':\n                if(event.target.checked){\n                    localStorage.setItem(event.target.name, event.target.checked)\n                    setSortField('email')\n\n                }else{\n                    localStorage.removeItem(event.target.name)\n                    setSortField('')\n\n                }\n                break\n            case 'sortFieldStatus':\n                if(event.target.checked){\n                    localStorage.setItem(event.target.name, event.target.checked)\n                    setSortField('status')\n\n                }else{\n                    localStorage.removeItem(event.target.name)\n                    setSortField('')\n\n                }\n                break\n            default:\n\n        }\n    }\n\n    const getTask = useCallback(async () => {\n        try{\n            setLoading(true)\n            await axios.get(\n                `https://uxcandy.com/~shapoval/test-task-backend/v2/?developer=ilia&page=${page}&sort_direction=${sortDirection}&sort_field=${sortField}`\n                ).then((response) => {\n                    setLoading(false)\n                    setTasksData(response.data.message.tasks)\n                    setNumTasks(response.data.message.total_task_count)\n                    \n                }, [page, sortDirection,sortField])  \n\n        }catch(e){console.log(e)}\n\n    }, [page, sortDirection,sortField])\n\n    const nextPage = () => setPage(prev => prev+1)\n    const previewPage = () => setPage(prev => prev-1)\n\n\n    useEffect(() => {\n        getTask()\n    }, [getTask])\n\n\n    if(loading){\n        return <progress />\n    }\n\n\n    if(tasksData.length){\n\n        return (\n            <>\n            <div style={{paddingTop: 10, width: 700}}>\n                <h1>Задачи</h1>\n                {tasksData.map((task) => \n                   <div className=\"card\" style={{marginTop: 10}} key={task.id}>\n                    <div className=\"card-body\">\n                      <h5 className=\"card-title\">{task.username}</h5>\n                      <h6 className=\"card-subtitle mb-2 text-muted\">{task.email}</h6>\n                      <Status status={task.status} />\n                      <p className=\"card-text\">{task.text}</p>\n                      {!!token && <Link className='btn btn-primary' to={`/edit/${task.id}`} style={{position: 'absolute', right:20, top:50}}>Редактировать</Link>}\n                    </div>\n                  </div>\n                )}\n                <Paginate\n                page={page}\n                numTasks={numTasks}\n                nextButton={nextPage}\n                previewButton={previewPage}\n                />\n            </div>\n            <Filter \n            filterTasks={filterTasks}\n            /></>\n        )\n    }\n    \n    return <p>Задач нет, добавляйте</p>\n}\n        \n"]},"metadata":{},"sourceType":"module"}